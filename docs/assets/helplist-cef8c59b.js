import{_ as z,E as d,y as B,Z as I,o as F,c as R,a as q,b as e,w as l,F as T,aa as H,$ as N,i as j,j as n,ab as L,a0 as M,f as D,l as P,a1 as X,X as Z,k as G,V as J,g as K,h as O,m as Q,n as W}from"./index-865ba819.js";/* empty css                   *//* empty css                 *//* empty css                *//* empty css                  *//* empty css                        *//* empty css                  *//* empty css               */import{h as w,b as Y,q as y,a as $,c as ee,d as te,e as le,f as oe}from"./helplist-15fe9d41.js";/* empty css                  *//* empty css                           */const ae={data(){return{helplist:[],adddialogVisible:!1,editdialogVisible:!1,total:"",Userinfo:{current:1,size:4},find:{name:""},Addform:{title:"",content:"",showStatus:"",icon:""},Editform:{title:"",content:"",icon:""},editform:{id:"",categoryId:"",title:"",showStatus:"",content:""},addformrules:{title:[{required:!0,message:"请输入类别",trigger:"blur"},{min:3,max:50,message:"类别长度在 3 到 50 个字符",trigger:"blur"}],content:[{required:!0,message:"请输入内容",trigger:"blur"},{min:3,max:100,message:"内容长度在 3 到 100个字符",trigger:"blur"}],icon:[{required:!0,message:"请输入内容",trigger:"blur"},{min:3,max:100,message:"内容长度在 3 到 100个字符",trigger:"blur"}]}}},created(){this.getlist()},methods:{handleCurrentChange(s){this.Userinfo.current=s,this.getlist()},async zs(s){if((await w(s)).code!=1)return d({type:"error",message:"状态修改失败"});d({type:"success",message:"状态修改成功"})},handleSizeChange(s){this.Userinfo.size=s,this.getlist()},async getlist(){const s=await Y(this.Userinfo);this.total=s.data.page.total,console.log(s),this.helplist=s.data.page.records,console.log("99999999",this.helplist)},async search(s){const t=await y(s);t.code!=1&&d({type:"error",message:"信息不存在"}),t.code==1&&(this.helplist=[],t.data.cmsHelpCategoryList.forEach(async p=>{(await $(p.id)).data.cmsHelps.forEach(i=>{this.helplist.push(i)})}))},addformclose(){this.$refs.AddformRef.resetFields()},async adduser(){const s={name:this.Addform.title,showStatus:this.Addform.showStatus,icon:this.Addform.icon};console.log(s);const t=await ee(s);console.log(t);const r=await y(s.name);if(console.log("data1",r),t.code==1&&r.code==1){const p={categoryId:r.data.cmsHelpCategoryList[0].id,content:this.Addform.content,showStatus:this.Addform.showStatus,title:this.Addform.title};(await te(p)).code==1?(d({type:"success",message:"成功添加信息"}),this.adddialogVisible=!1,this.getlist()):(d({type:"error",message:"添加信息失败"}),this.adddialogVisible=!1)}else d({type:"error",message:"添加信息失败"}),this.adddialogVisible=!1},editclose(){this.$refs.EditformRef.resetFields()},editlist(){this.$refs.EditformRef.validate(async s=>{if(!s)return;if((await w(this.Editform)).code!=1)return d({type:"error",message:"修改失败"});d({type:"success",message:"修改成功"}),this.editdialogVisible=!1,this.getuserlist()})},async edit(s){console.log(s.id);const t=await le(s.id);console.log(t.data.help),this.Editform=t.data.help,this.editdialogVisible=!0},async deleteuser(s){const t=await B.confirm("此操作将永久删除该信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(r=>r);if(t!="confirm")return d({type:"info",message:"已取消删除"});t=="confirm"&&((await oe(s)).code!=1&&d({type:"success",message:"删除失败"}),d({type:"success",message:"删除成功"}),this.getlist())}}};function se(s,t,r,p,a,i){const h=L,C=H,E=I("Search"),v=M,m=D,u=P,_=X,S=Z,f=G,x=J,A=K,U=O,k=N,c=Q,V=W,b=j;return F(),R(T,null,[q("div",null,[e(C,{"separator-class":"el-icon-arrow-right"},{default:l(()=>[e(h,{to:{path:"/weclome"}},{default:l(()=>[n("首页")]),_:1}),e(h,null,{default:l(()=>[n("帮助信息分类管理")]),_:1}),e(h,null,{default:l(()=>[n("帮助信息列表")]),_:1})]),_:1})]),e(k,null,{default:l(()=>[e(S,{gutter:20},{default:l(()=>[e(_,{span:8},{default:l(()=>[e(u,{placeholder:"请输入搜索内容",size:"large",modelValue:this.find.name,"onUpdate:modelValue":t[1]||(t[1]=o=>this.find.name=o)},{append:l(()=>[e(m,{onClick:t[0]||(t[0]=o=>i.search(this.find.name))},{default:l(()=>[e(v,null,{default:l(()=>[e(E)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(_,{span:6},{default:l(()=>[e(m,{type:"primary",onClick:t[2]||(t[2]=o=>a.adddialogVisible=!0)},{default:l(()=>[n("添加信息")]),_:1})]),_:1})]),_:1}),e(A,{data:a.helplist,style:{width:"100%"},"header-cell-style":{"text-align":"center"},"cell-style":{"text-align":"center"},stripe:"",border:""},{default:l(()=>[e(f,{type:"index",label:"序号",width:"180"}),e(f,{property:"title",label:"类别",width:"230"}),e(f,{label:"内容",property:"content",width:"550"}),e(f,{label:"展示状态",property:"showStatus",width:"120"},{default:l(o=>[e(x,{modelValue:o.row.showStatus,"onUpdate:modelValue":g=>o.row.showStatus=g,"active-value":0,"inactive-value":1,"active-color":"#13ce66","inactive-color":"#ff4949",onChange:g=>i.zs(o.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(f,{label:"操作"},{default:l(o=>[e(m,{type:"warning",onClick:g=>i.edit(o.row)},{default:l(()=>[n("修改")]),_:2},1032,["onClick"]),e(m,{type:"danger",onClick:g=>i.deleteuser(o.row.id)},{default:l(()=>[n("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e(U,{onSizeChange:i.handleSizeChange,onCurrentChange:i.handleCurrentChange,"current-page":a.Userinfo.current,"page-sizes":[4,8,12,16],"page-size":a.Userinfo.size,layout:"total, sizes, prev, pager, next, jumper",total:a.total},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])]),_:1}),e(b,{title:"添加帮助信息",modelValue:a.adddialogVisible,"onUpdate:modelValue":t[8]||(t[8]=o=>a.adddialogVisible=o),onClose:i.addformclose,width:"50%"},{footer:l(()=>[e(m,{onClick:t[7]||(t[7]=o=>this.adddialogVisible=!1)},{default:l(()=>[n("取 消")]),_:1}),e(m,{type:"primary",onClick:i.adduser},{default:l(()=>[n("确 定")]),_:1},8,["onClick"])]),default:l(()=>[e(V,{ref:"AddformRef",model:a.Addform,"label-width":"70px",rules:a.addformrules},{default:l(()=>[e(c,{label:"类别",prop:"title"},{default:l(()=>[e(u,{modelValue:a.Addform.title,"onUpdate:modelValue":t[3]||(t[3]=o=>a.Addform.title=o)},null,8,["modelValue"])]),_:1}),e(c,{label:"内容",prop:"content"},{default:l(()=>[e(u,{modelValue:a.Addform.content,"onUpdate:modelValue":t[4]||(t[4]=o=>a.Addform.content=o)},null,8,["modelValue"])]),_:1}),e(c,{label:"展示状态",prop:"showStatus"},{default:l(()=>[e(u,{modelValue:a.Addform.showStatus,"onUpdate:modelValue":t[5]||(t[5]=o=>a.Addform.showStatus=o)},null,8,["modelValue"])]),_:1}),e(c,{label:"图标",prop:"icon"},{default:l(()=>[e(u,{modelValue:a.Addform.icon,"onUpdate:modelValue":t[6]||(t[6]=o=>a.Addform.icon=o)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","onClose"]),e(b,{title:"修改帮助信息",modelValue:a.editdialogVisible,"onUpdate:modelValue":t[13]||(t[13]=o=>a.editdialogVisible=o),onClose:i.editclose,width:"50%"},{footer:l(()=>[e(m,{onClick:t[12]||(t[12]=o=>this.editdialogVisible=!1)},{default:l(()=>[n("取 消")]),_:1}),e(m,{type:"primary",onClick:i.editlist},{default:l(()=>[n("确 定")]),_:1},8,["onClick"])]),default:l(()=>[e(V,{ref:"EditformRef",model:a.Editform,"label-width":"70px",rules:a.addformrules},{default:l(()=>[e(c,{label:"类别",prop:"title"},{default:l(()=>[e(u,{modelValue:a.Editform.title,"onUpdate:modelValue":t[9]||(t[9]=o=>a.Editform.title=o)},null,8,["modelValue"])]),_:1}),e(c,{label:"内容",prop:"content"},{default:l(()=>[e(u,{modelValue:a.Editform.content,"onUpdate:modelValue":t[10]||(t[10]=o=>a.Editform.content=o)},null,8,["modelValue"])]),_:1}),e(c,{label:"图标",prop:"icon"},{default:l(()=>[e(u,{modelValue:a.Editform.icon,"onUpdate:modelValue":t[11]||(t[11]=o=>a.Editform.icon=o)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","onClose"])],64)}const _e=z(ae,[["render",se],["__scopeId","data-v-685be0c0"]]);export{_e as default};
