import{_ as G,r as s,o as I,c as N,b as e,w as a,a as C,X as j,g as q,h as L,i as O,j as d,z as R,l as X,f as A,k as H,S as J,m as K,Y as Q,V as W,n as Z}from"./index-865ba819.js";/* empty css                   *//* empty css                 *//* empty css                  *//* empty css                       *//* empty css                        *//* empty css                  *//* empty css                  *//* empty css               */const ee={class:"goodslist"},te={class:"pagination"},le={class:"dialog-footer"},ae={__name:"sms-flash-promotion",setup(oe){const u=s(!1),m=s(1),b=s(0),v=s(1),f=s(10),g=s(""),c=s(),r=async()=>{let{data:n}=await api.getList({current:v.value,size:f.value});c.value=n.page.records,b.value=n.page.total};r();const o=s({title:"",startDate:"",endDate:"",status:!0}),x=async()=>{if(!m.value){o.value.status=o.value.status?1:0,await api.editGoods(o.value),r(),u.value=!1;return}o.value.status=o.value.status?1:0,await api.addGoods(o.value),r(),u.value=!1},D=(n,t)=>{u.value=!0,m.value=0,t.status=t.status==1,o.value={...t}},k=()=>{u.value=!0,m.value=1},E=async(n,t)=>{await api.delGoods({id:t.id}),r()},h=()=>{o.value={id:"",title:"",start_date:"",end_date:"",status:!0,create_time:""}},z=()=>{c.value=c.value.filter(n=>n.title.includes(g.value))},Y=n=>{r()},S=n=>{r()};return(n,t)=>{const y=X,p=A,V=j,i=H,U=J,F=q,P=L,_=K,w=Q,T=W,$=Z,B=O;return I(),N("div",ee,[e(V,{style:{"margin-bottom":"10px"}},{default:a(()=>[e(y,{style:{width:"150px","margin-right":"10px"},modelValue:g.value,"onUpdate:modelValue":t[0]||(t[0]=l=>g.value=l),autocomplete:"off"},null,8,["modelValue"]),e(p,{type:"primary",onClick:z},{default:a(()=>[d("查询")]),_:1})]),_:1}),e(V,{style:{"margin-bottom":"5px"}},{default:a(()=>[e(p,{type:"primary",onClick:k},{default:a(()=>[d("新增商品")]),_:1})]),_:1}),e(F,{border:"",data:c.value,style:{width:"100%"}},{default:a(()=>[e(i,{align:"center",prop:"id",label:"编号",width:"80"}),e(i,{align:"center",prop:"title",label:"秒杀时间段名称",width:"180"}),e(i,{align:"center",prop:"startDate",label:"开始日期",width:"180"}),e(i,{align:"center",prop:"endDate",label:"结束日期"}),e(i,{align:"center",label:"上下线状态"},{default:a(l=>[e(U,null,{default:a(()=>[d(R(l.row.status?"已上线":"已下线"),1)]),_:2},1024)]),_:1}),e(i,{align:"center",prop:"createTime",label:"创建时间"}),e(i,{align:"center",label:"操作"},{default:a(l=>[e(p,{type:"primary",size:"small",onClick:M=>D(l.$index,l.row)},{default:a(()=>[d("编辑")]),_:2},1032,["onClick"]),e(p,{size:"small",type:"danger",onClick:M=>E(l.$index,l.row)},{default:a(()=>[d("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),C("div",te,[e(P,{style:{"margin-top":"10px"},"current-page":v.value,"onUpdate:currentPage":t[1]||(t[1]=l=>v.value=l),"page-size":f.value,"onUpdate:pageSize":t[2]||(t[2]=l=>f.value=l),"page-sizes":[10,20,50,100],small:"small",background:"",layout:"total, sizes, prev, pager, next, jumper",total:b.value,onSizeChange:Y,onCurrentChange:S},null,8,["current-page","page-size","total"])]),e(B,{modelValue:u.value,"onUpdate:modelValue":t[8]||(t[8]=l=>u.value=l),title:m.value==0?"编辑":"新增",onClosed:h},{footer:a(()=>[C("span",le,[e(p,{onClick:t[7]||(t[7]=l=>u.value=!1)},{default:a(()=>[d("取消")]),_:1}),e(p,{type:"primary",onClick:x},{default:a(()=>[d(" 保存 ")]),_:1})])]),default:a(()=>[e($,{"label-width":"180px",model:o.value},{default:a(()=>[e(_,{label:"秒杀时间段名称"},{default:a(()=>[e(y,{modelValue:o.value.title,"onUpdate:modelValue":t[3]||(t[3]=l=>o.value.title=l),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(_,{label:"开始日期"},{default:a(()=>[e(w,{modelValue:o.value.startDate,"onUpdate:modelValue":t[4]||(t[4]=l=>o.value.startDate=l),type:"date","value-format":"YYYY-MM-DD",placeholder:"请选择日期"},null,8,["modelValue"])]),_:1}),e(_,{label:"结束日期"},{default:a(()=>[e(w,{modelValue:o.value.endDate,"onUpdate:modelValue":t[5]||(t[5]=l=>o.value.endDate=l),type:"date","value-format":"YYYY-MM-DD",placeholder:"请选择日期"},null,8,["modelValue"])]),_:1}),e(_,{label:"上下线状态"},{default:a(()=>[e(T,{modelValue:o.value.status,"onUpdate:modelValue":t[6]||(t[6]=l=>o.value.status=l),class:"ml-2",style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},_e=G(ae,[["__scopeId","data-v-284a1232"]]);export{_e as default};
